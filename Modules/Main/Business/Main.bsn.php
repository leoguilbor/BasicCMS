<?phpclass MainBusiness extends Business{    public $modulesPerPage;    public $modules;        public function __construct()    {        $this->setDao(new MainModel());    }	public function getModules(){	    	    $module = new ModuleModel();	    return $module->list();	    	}		public function getModulesPerPage($page){	    if ($page!=null)	    {	        $activeModules= array();	        $moduleDAO = new ModuleModel();	        $pageDAO = new PageModel();	        $modulesPerPageModel = new ModulesPerPageModel();	        	        $this->modulesPerPage = $modulesPerPageModel->getByPage($pageDAO->getByName($page));	        return $this->modulesPerPage;	    }	    	    $this->modulesPerPage =$this->getModules();	    return $this->modulesPerPage;	    	}		public function loadModules(){	    $response = array(); 	    	    foreach ($this->modulesPerPage as $module){	        	        require_once "Modules/".$module["name"].'/Controller/'.$module["name"].'.ctrl.php';	        	        $class = $module["name"].'Controller';	        	        $controller = new $class($module["css"]);	            	        if ($module["action"]!='default'){   	            $controller->$module["action"]($module["parameters"]);	        }	        else {    	            	            $controller->default($module["parameters"]);	        }	        	        if (file_exists('Modules/'.$module["name"].'/resources/'.$module["name"].'.css')){    	               $response["css"] .= '<link rel="stylesheet" href="'. ConfigLoad::getConfig()->URL . '/Modules/'.$module["name"].'/resources/'.$module["name"].'.css" >';	                	        }	        	        if (file_exists('Modules/'.$module["name"].'/resources/'.$module["name"].'.js')){	            $response["js"]  .= '<script src="'.ConfigLoad::getConfig()->URL . '/Modules/'.$module["name"].'/resources/'.$module["name"].'.js"></script>';	        }	        	    }        	    return $response;	}}?>